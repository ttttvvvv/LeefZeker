---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import KnowledgeCard from '../../components/KnowledgeCard.astro';
---

<Layout title="Kennisbank - LeefZeker WMO & Subsidie Gidsen voor Senioren">
  <Header />
  
  <main>
    <!-- Hero Section -->
    <section class="page-hero">
      <div class="container">
        <div class="hero-content">
          <h1 class="hero-title">Kennisbank</h1>
          <p class="hero-description">
            Complete gidsen, stappenplannen en tips over WMO, subsidies, trapliften en veilig wonen voor ouderen en mantelzorgers.
          </p>
        </div>
      </div>
    </section>

    <!-- Knowledge Base Section -->
    <section class="section knowledge-section">
      <div class="container">
        <div class="knowledge-header-section">
          <h2 class="section-title">Kennisbank WMO & Subsidies</h2>
          <p class="section-subtitle">
            Praktische gidsen, stappenplannen en ervaringsverhalen voor ouderen en mantelzorgers
          </p>
          
          <!-- Search and Filter -->
          <div class="knowledge-controls">
            <div class="knowledge-search">
              <input 
                type="text" 
                id="knowledge-search" 
                placeholder="Zoek in de kennisbank..." 
                class="search-input"
              />
              <button class="search-button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35"/>
                </svg>
              </button>
            </div>
            
            <div class="knowledge-filters">
              <button class="filter-btn active" data-category="all">Alles</button>
              <button class="filter-btn" data-category="wmo-per-gemeente">WMO per gemeente</button>
              <button class="filter-btn" data-category="stap-voor-stap">Stappenplannen</button>
              <button class="filter-btn" data-category="knelpunten">Knelpunten</button>
              <button class="filter-btn" data-category="subsidieopties">Subsidie-opties</button>
              <button class="filter-btn" data-category="ervaringen">Ervaringen</button>
              <button class="filter-btn" data-category="tips-advies">Tips & Advies</button>
              <button class="filter-btn" data-category="producten">Producten</button>
              <button class="filter-btn" data-category="installatie">Installatie</button>
            </div>
          </div>
        </div>

        <div class="knowledge-grid" id="knowledge-grid">
          
          <!-- WMO per gemeente -->
          <KnowledgeCard
            title="WMO-aanvraag in Amsterdam: complete gids"
            audience="🧓 Voor senioren"
            category="wmo-per-gemeente"
            tags={["wmo", "amsterdam", "gemeente"]}
            summary="Alles wat u moet weten over WMO-aanvragen in Amsterdam: procedures, wachttijden, contactgegevens en wat wel/niet wordt vergoed."
            icon="🏛️"
            downloadLink="/downloads/wmo-amsterdam-gids.pdf"
            blogLink="/blog/wmo-amsterdam-2025"
            ctaText="Hulp nodig?"
            ctaLink="/contact"
          />

          <KnowledgeCard
            title="Rotterdam WMO-loket: zo werkt het"
            audience="👨‍👩‍👧 Voor mantelzorgers"
            category="wmo-per-gemeente"
            tags={["wmo", "rotterdam", "digitaal"]}
            summary="Rotterdam heeft een digitaal WMO-loket. Ontdek hoe u online een aanvraag doet voor uw ouders en welke documenten u nodig heeft."
            icon="💻"
            downloadLink="/downloads/rotterdam-wmo-stappenplan.pdf"
            blogLink="/blog/digitale-wmo-aanvraag-rotterdam"
            ctaText="Probeer online"
            ctaLink="https://rotterdam.nl/wmo"
          />

          <!-- Stap-voor-stap handleidingen -->
          <KnowledgeCard
            title="Traplift aanvragen via WMO in 5 stappen"
            audience="🧓 Voor senioren"
            category="stap-voor-stap"
            tags={["traplift", "wmo", "stappenplan"]}
            summary="Van eerste overweging tot installatie: dit stappenplan laat zien hoe u een traplift via de WMO aanvraagt, inclusief benodigde documenten."
            icon="🏗️"
            downloadLink="/downloads/traplift-aanvraag-checklist.pdf"
            blogLink="/blog/traplift-wmo-stappenplan"
            ctaText="Gratis advies"
            ctaLink="/contact"
          />

          <KnowledgeCard
            title="Scootmobiel-vergoeding: wat heb ik nodig?"
            audience="🧓 Voor senioren"
            category="stap-voor-stap"
            tags={["scootmobiel", "vergoeding", "documenten"]}
            summary="Welke medische verklaring heb ik nodig? Wat zijn de voorwaarden? Complete uitleg over scootmobiel-vergoeding via WMO of zorgverzekering."
            icon="🛵"
            downloadLink="/downloads/scootmobiel-vergoeding-gids.pdf"
            blogLink="/blog/scootmobiel-vergoeding-2025"
            ctaText="Informatie aanvragen"
            ctaLink="/producten/hulpmiddelen"
          />

          <!-- Veelvoorkomende knelpunten -->
          <KnowledgeCard
            title="WMO-aanvraag afgewezen: wat nu?"
            audience="👨‍👩‍👧 Voor mantelzorgers"
            category="knelpunten"
            tags={["afwijzing", "bezwaar", "juridisch"]}
            summary="Uw aanvraag is afgewezen? Ontdek wanneer u bezwaar kunt maken, hoe dat proces werkt en welke alternatieven u heeft."
            icon="⚖️"
            downloadLink="/downloads/bezwaar-wmo-template.pdf"
            blogLink="/blog/wmo-afwijzing-bezwaar-maken"
            ctaText="Juridische hulp"
            ctaLink="/contact"
          />

          <KnowledgeCard
            title="Lange wachttijd bij gemeente: tips"
            audience="🧓 Voor senioren"
            category="knelpunten"
            tags={["wachttijd", "gemeente", "spoedaanvraag"]}
            summary="Wacht u al maanden op een beslissing? Leer wanneer u kunt aandringen, hoe spoedaanvragen werken en wat uw rechten zijn."
            icon="⏰"
            blogLink="/blog/lange-wachttijd-wmo-aanvraag"
            ctaText="Situatie bespreken"
            ctaLink="/contact"
          />

          <!-- Subsidieopties buiten WMO -->
          <KnowledgeCard
            title="Blijverslening uitgelegd in 3 minuten"
            audience="👨‍👩‍👧 Voor mantelzorgers"
            category="subsidieopties"
            tags={["blijverslening", "55-plus", "financiering"]}
            summary="Uw ouders vallen buiten de WMO? De Blijverslening biedt een uitkomst: lenen tegen de waarde van het huis, zonder maandlasten."
            icon="🏦"
            downloadLink="/downloads/blijverslening-factsheet.pdf"
            blogLink="/blog/blijverslening-uitgelegd"
            ctaText="Meer informatie"
            ctaLink="/financiering#blijverslening"
          />

          <KnowledgeCard
            title="Belastingvoordeel bij woningaanpassingen"
            audience="🧓 Voor senioren"
            category="subsidieopties"
            tags={["belasting", "aftrek", "zorgkosten"]}
            summary="Wist u dat woningaanpassingen vaak aftrekbaar zijn als zorgkosten? Plus informatie over BTW-vrijstelling bij medische noodzaak."
            icon="📊"
            downloadLink="/downloads/belastingvoordeel-gids.pdf"
            blogLink="/blog/belastingvoordeel-woningaanpassingen"
            ctaText="Bereken voordeel"
            ctaLink="/contact"
          />

          <!-- Casestudies/ervaringen -->
          <KnowledgeCard
            title="Ervaringsverhaal: Van WMO-aanvraag tot traplift"
            audience="🧓 Voor senioren"
            category="ervaringen"
            tags={["ervaringsverhaal", "traplift", "succes"]}
            summary="Meneer De Graaf (78) vertelt hoe hij via de WMO een traplift kreeg geïnstalleerd. Van eerste aanvraag tot eindresultaat: een eerlijk verhaal."
            icon="👤"
            blogLink="/blog/ervaringsverhaal-meneer-de-graaf"
            ctaText="Lees verhaal"
            ctaLink="/blog/ervaringsverhaal-meneer-de-graaf"
          />

          <KnowledgeCard
            title="Mantelzorger helpt moeder met WMO-PGB"
            audience="👨‍👩‍👧 Voor mantelzorgers"
            category="ervaringen"
            tags={["mantelzorg", "pgb", "badkamer"]}
            summary="Hoe dochter Maria haar moeder hielp bij het regelen van een WMO-PGB voor badkameraanpassingen. Praktische tips en valkuilen."
            icon="🛁"
            blogLink="/blog/mantelzorger-wmo-pgb-ervaring"
            ctaText="Lees verhaal"
            ctaLink="/blog/mantelzorger-wmo-pgb-ervaring"
          />

          <KnowledgeCard
            title="Van afwijzing naar alsnog goedkeuring"
            audience="👨‍👩‍👧 Voor mantelzorgers"
            category="ervaringen"
            tags={["afwijzing", "bezwaar", "succes"]}
            summary="Familie Jansen kreeg eerst een afwijzing voor een platformlift. Via bezwaar en extra medische onderbouwing lukte het alsnog."
            icon="✅"
            blogLink="/blog/van-afwijzing-naar-goedkeuring"
            ctaText="Lees verhaal"
            ctaLink="/blog/van-afwijzing-naar-goedkeuring"
          />

          <!-- Gemeente zoeker -->
          <KnowledgeCard
            title="WMO-regels in uw gemeente opzoeken"
            audience="🧓 Voor senioren"
            category="wmo-per-gemeente"
            tags={["gemeente", "regels", "zoeken"]}
            summary="Elke gemeente heeft eigen WMO-regels. Gebruik onze gemeente-zoeker om te ontdekken wat de regels zijn in uw woonplaats."
            icon="📍"
            ctaText="Zoek uw gemeente"
            ctaLink="/gemeente-zoeker"
          />

          <!-- Voormalige blog posts als kennisbank items -->
          <KnowledgeCard
            title="5 Tips voor het kiezen van de juiste traplift"
            audience="🧓 Voor senioren"
            category="tips-advies"
            tags={["traplift", "keuze", "tips", "advies"]}
            summary="Het kiezen van een traplift is een belangrijke beslissing. Lees onze praktische tips om de beste keuze te maken voor uw situatie."
            icon="💡"
            blogLink="/blog/1"
            ctaText="Lees tips"
            ctaLink="/blog/1"
          />

          <KnowledgeCard
            title="Veilig wonen: Hoe u uw huis seniorvriendelijk maakt"
            audience="🧓 Voor senioren"
            category="tips-advies"
            tags={["veilig wonen", "seniorvriendelijk", "woningaanpassingen"]}
            summary="Ontdek praktische aanpassingen die u kunt maken om uw huis veiliger en toegankelijker te maken voor senioren."
            icon="🏠"
            blogLink="/blog/2"
            ctaText="Veiligheid tips"
            ctaLink="/blog/2"
          />

          <KnowledgeCard
            title="Onderhoud van uw traplift: Wat u moet weten"
            audience="🧓 Voor senioren"
            category="tips-advies"
            tags={["onderhoud", "traplift", "service", "tips"]}
            summary="Regelmatig onderhoud zorgt ervoor dat uw traplift optimaal blijft functioneren. Lees hier alles over onderhoud en service."
            icon="🔧"
            blogLink="/blog/3"
            ctaText="Onderhoud info"
            ctaLink="/blog/3"
          />

          <KnowledgeCard
            title="Subsidies en vergoedingen voor trapliften"
            audience="👨‍👩‍👧 Voor mantelzorgers"
            category="subsidieopties"
            tags={["subsidie", "vergoeding", "traplift", "financiering"]}
            summary="Informatie over mogelijke subsidies en vergoedingen van zorgverzekeraars voor de aanschaf van een traplift."
            icon="💰"
            blogLink="/blog/4"
            ctaText="Bekijk subsidies"
            ctaLink="/blog/4"
          />

          <KnowledgeCard
            title="Platformliften vs Trapliften: Wat is het verschil?"
            audience="🧓 Voor senioren"
            category="producten"
            tags={["platformlift", "traplift", "verschil", "keuze"]}
            summary="Leer het verschil tussen platformliften en trapliften en ontdek welke oplossing het beste bij uw situatie past."
            icon="⚖️"
            blogLink="/blog/5"
            ctaText="Vergelijk opties"
            ctaLink="/blog/5"
          />

          <KnowledgeCard
            title="Installatie van een traplift: Wat kunt u verwachten?"
            audience="🧓 Voor senioren"
            category="installatie"
            tags={["installatie", "traplift", "proces", "verwachting"]}
            summary="Een stap-voor-stap overzicht van het installatieproces van een traplift, van eerste bezoek tot eindcontrole."
            icon="🛠️"
            blogLink="/blog/6"
            ctaText="Installatie info"
            ctaLink="/blog/6"
          />

        </div>

        <!-- Geen resultaten -->
        <div class="no-results" id="no-results" style="display: none;">
          <div class="no-results-content">
            <div class="no-results-icon">🔍</div>
            <h3>Geen resultaten gevonden</h3>
            <p>Probeer een andere zoekterm of kies een andere categorie</p>
            <button class="btn btn-secondary" onclick="clearSearch()">Wis filters</button>
          </div>
        </div>

        <!-- Knowledge CTA -->
        <div class="knowledge-cta">
          <div class="knowledge-cta-content">
            <div class="knowledge-cta-icon">💡</div>
            <div class="knowledge-cta-text">
              <h3>Staat uw vraag er niet bij?</h3>
              <p>Onze adviseurs hebben antwoord op alle WMO- en subsidievragen</p>
            </div>
            <div class="knowledge-cta-actions">
              <a href="tel:020-123-45-67" class="btn btn-primary">Bel direct</a>
              <a href="/contact" class="btn btn-secondary">Plan gesprek</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Newsletter Section -->
    <section class="section newsletter-section">
      <div class="container">
        <div class="newsletter-content">
          <div class="newsletter-text">
            <h2 class="newsletter-title">Blijf op de hoogte</h2>
            <p class="newsletter-description">
              Ontvang onze nieuwsbrief met de laatste tips, nieuws en aanbiedingen voor senioren.
            </p>
          </div>
          <form class="newsletter-form">
            <input type="email" placeholder="Uw e-mailadres" class="newsletter-input" required />
            <button type="submit" class="btn btn-primary">Aanmelden</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  .page-hero {
    background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-red-dark) 100%);
    color: var(--white);
    padding: 4rem 0;
    text-align: center;
  }

  .hero-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }

  .hero-description {
    font-size: 1.25rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }



  .newsletter-section {
    background: linear-gradient(135deg, var(--text-dark) 0%, #374151 100%);
    color: var(--white);
  }

  .newsletter-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
  }

  .newsletter-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }

  .newsletter-description {
    font-size: 1.125rem;
    opacity: 0.9;
    line-height: 1.6;
  }

  .newsletter-form {
    display: flex;
    gap: 1rem;
  }

  .newsletter-input {
    flex: 1;
    padding: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 0.5rem;
    background: rgba(255, 255, 255, 0.1);
    color: var(--white);
    font-size: 1rem;
  }

  .newsletter-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
  }

  .newsletter-input:focus {
    outline: none;
    border-color: var(--primary-red);
  }

  /* Knowledge Base Section */
  .knowledge-section {
    background-color: var(--warm-gray);
  }

  .knowledge-header-section {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 3rem;
  }

  .knowledge-controls {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .knowledge-search {
    position: relative;
    max-width: 500px;
    margin: 0 auto;
  }

  .search-input {
    width: 100%;
    padding: 1rem 3rem 1rem 1rem;
    border: 2px solid var(--border-light);
    border-radius: 2rem;
    font-size: 1rem;
    background: var(--white);
    transition: border-color 0.3s ease;
  }

  .search-input:focus {
    outline: none;
    border-color: var(--primary-red);
  }

  .search-button {
    position: absolute;
    right: 0.5rem;
    top: 50%;
    transform: translateY(-50%);
    background: var(--primary-red);
    color: var(--white);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .search-button:hover {
    background: var(--primary-red-dark);
  }

  .knowledge-filters {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .knowledge-filters .filter-btn {
    padding: 0.5rem 1rem;
    border: 2px solid var(--border-light);
    background: var(--white);
    color: var(--text-gray);
    border-radius: 2rem;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .knowledge-filters .filter-btn:hover {
    border-color: var(--primary-red);
    color: var(--primary-red);
  }

  .knowledge-filters .filter-btn.active {
    background: var(--primary-red);
    color: var(--white);
    border-color: var(--primary-red);
  }

  .knowledge-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .no-results {
    text-align: center;
    padding: 4rem 2rem;
  }

  .no-results-content {
    max-width: 400px;
    margin: 0 auto;
  }

  .no-results-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.5;
  }

  .no-results h3 {
    font-size: 1.5rem;
    color: var(--text-dark);
    margin-bottom: 1rem;
  }

  .no-results p {
    color: var(--text-gray);
    margin-bottom: 2rem;
  }

  .knowledge-cta {
    background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-red-dark) 100%);
    border-radius: 1rem;
    padding: 2rem;
    color: var(--white);
    text-align: center;
  }

  .knowledge-cta-content {
    display: flex;
    align-items: center;
    gap: 2rem;
    max-width: 600px;
    margin: 0 auto;
  }

  .knowledge-cta-icon {
    font-size: 3rem;
    flex-shrink: 0;
  }

  .knowledge-cta-text {
    flex-grow: 1;
    text-align: left;
  }

  .knowledge-cta-text h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--white);
  }

  .knowledge-cta-text p {
    opacity: 0.9;
    margin-bottom: 0;
  }

  .knowledge-cta-actions {
    display: flex;
    gap: 1rem;
    flex-shrink: 0;
  }

  .knowledge-cta .btn-secondary {
    background: var(--white);
    color: var(--primary-red);
    border-color: var(--white);
  }

  .knowledge-cta .btn-secondary:hover {
    background: transparent;
    color: var(--white);
    border-color: var(--white);
  }

  @media (max-width: 1024px) {
    .newsletter-content {
      grid-template-columns: 1fr;
    }

    .knowledge-grid {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    .knowledge-cta-content {
      flex-direction: column;
      text-align: center;
      gap: 1.5rem;
    }

    .knowledge-cta-text {
      text-align: center;
    }

    .knowledge-cta-actions {
      justify-content: center;
    }
  }

  @media (max-width: 768px) {
    .hero-title {
      font-size: 2rem;
    }

    .newsletter-form {
      flex-direction: column;
    }

    .knowledge-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .knowledge-filters {
      gap: 0.5rem;
    }

    .knowledge-filters .filter-btn {
      font-size: 0.8rem;
      padding: 0.4rem 0.8rem;
    }

    .knowledge-cta {
      padding: 1.5rem;
    }

    .knowledge-cta-actions {
      flex-direction: column;
      align-items: center;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Knowledge base search and filter functionality
    const searchInput = document.getElementById('knowledge-search');
    const knowledgeFilterButtons = document.querySelectorAll('.knowledge-filters .filter-btn');
    const knowledgeGrid = document.getElementById('knowledge-grid');
    const noResults = document.getElementById('no-results');
    const knowledgeCards = document.querySelectorAll('.knowledge-card');

    let currentCategory = 'all';
    let currentSearchTerm = '';

    // Search functionality
    if (searchInput) {
      searchInput.addEventListener('input', function() {
        currentSearchTerm = this.value.toLowerCase().trim();
        filterKnowledgeCards();
      });
    }

    // Filter functionality
    knowledgeFilterButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Update active button
        knowledgeFilterButtons.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        
        currentCategory = this.dataset.category;
        filterKnowledgeCards();
      });
    });

    function filterKnowledgeCards() {
      let visibleCount = 0;

      knowledgeCards.forEach(card => {
        const title = card.querySelector('.knowledge-title')?.textContent.toLowerCase() || '';
        const summary = card.querySelector('.knowledge-summary')?.textContent.toLowerCase() || '';
        const category = card.dataset.category || '';
        const tags = Array.from(card.querySelectorAll('.knowledge-tag')).map(tag => tag.textContent.toLowerCase());

        // Check category filter
        const categoryMatch = currentCategory === 'all' || category === currentCategory;

        // Check search term
        const searchMatch = currentSearchTerm === '' || 
          title.includes(currentSearchTerm) || 
          summary.includes(currentSearchTerm) ||
          tags.some(tag => tag.includes(currentSearchTerm));

        if (categoryMatch && searchMatch) {
          card.style.display = 'block';
          visibleCount++;
        } else {
          card.style.display = 'none';
        }
      });

      // Show/hide no results message
      if (visibleCount === 0 && knowledgeGrid && noResults) {
        noResults.style.display = 'block';
        knowledgeGrid.style.display = 'none';
      } else if (knowledgeGrid && noResults) {
        noResults.style.display = 'none';
        knowledgeGrid.style.display = 'grid';
      }
    }

    // Clear search function (global)
    window.clearSearch = function() {
      if (searchInput) {
        searchInput.value = '';
      }
      currentSearchTerm = '';
      currentCategory = 'all';
      
      knowledgeFilterButtons.forEach(btn => btn.classList.remove('active'));
      const allButton = document.querySelector('[data-category="all"]');
      if (allButton) {
        allButton.classList.add('active');
      }
      
      filterKnowledgeCards();
    };
  });
</script>